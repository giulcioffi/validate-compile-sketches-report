name: 'Validate Sketches Compilation Results Against Database'
description: 'Return a compilation failure only if for at least one sketch that failed it was expected a Pass'
inputs:
  verbose:
    description: 'Set to true to show verbose output in the log'
    default: false
  sketches-report-path:
    description: 'Provide path to sketches reports generated by compile-sketches action.'
    default: 'sketches-reports'
  expected-results-database:
    description: 'Provide full path to database, including filename, with expected compilations results.'
    default: 'database-reports/expected-results-database.json'
  github-token:
    description: 'GitHub access token used to comment the memory usage comparison results to the PR thread'
    default: ${{ github.token }}
runs:
  using: "composite"
  steps:
    - run: ${{ github.action_path }}/compare-reports.sh ${{ inputs.sketches-report-path }} ${{ inputs.expected-results-database }}
      shell: bash
